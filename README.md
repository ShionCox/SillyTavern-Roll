# SillyTavern 骰子插件 (Dice Roller)

## 📖 使用方法

### 基础命令

使用 `/roll` 或 `/dice` 命令进行掷骰。

*   **默认掷骰**:
    ```
    /roll
    ```
    如果不输入参数，默认投掷一个 20 面骰 (`1d20`)。

*   **指定表达式**:
    支持 `NdM+X` 或 `NdM-X` 格式（N=数量，M=面数，X=修正值）。
    ```
    /roll 1d20      # 投掷 1 个 20 面骰
    /roll 3d6+2     # 投掷 3 个 6 面骰，结果加 2
    /roll 2d10-1    # 投掷 2 个 10 面骰，结果减 1
    ```

*   **爆骰 (Exploding Dice)**:
    在面数后添加 `!` 即可启用爆骰。当掷出最大值时，会额外再掷一次并累加，直到不再是最大值为止。
    ```
    /roll 1d6!+2    # 6 面骰爆骰，修正值 +2
    ```

### 调试命令

查看插件内部存储的最后一次掷骰数据。
```
/rollDebug
# 或
/ddebug
```

## 🔧 宏 (Macros)

插件会自动注册以下宏，你可以在发送的消息或脚本中使用它们：

| 宏名称 | 描述 |
| :--- | :--- |
| `{{lastRollTotal}}` | 获取最后一次掷骰的最终数值（含修正）。 |
| `{{lastRoll}}` | 获取最后一次掷骰的完整 JSON 数据对象。 |

**示例**:
> "我尝试攻击哥布林！(掷骰结果: {{lastRollTotal}})"

## 📝 注意事项

*   **大成功/大失败判定**: 仅在投掷**单个骰子**（如 `1d20`, `1d100`）时生效。
    *   **大成功**: 掷出骰子面数的最大值（如 d20 掷出 20）。
    *   **大失败**: 掷出 1。
*   **安全限制**: 为了防止卡死，单次掷骰数量上限为 1000，面数上限为 1000，爆骰最大追加次数为 10000。

## 👤 作者

*   **Author**: Shion
*   **Version**: 1.0.0
